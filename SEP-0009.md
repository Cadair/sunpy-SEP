# SEP-0009 -- Release Pattern for SunPy Core

| SEP           | 9                              |
|---------------|--------------------------------|
| title         | Release Pattern for SunPy Core |
| author(s)     | Stuart Mumford, Russel Hewett  |
| contact email | stuart@cadair.com              |
| date-creation | 2018-12-13                     |
| type          | informational                  |
| status        | discussion                     |
| discussion    |                                |

# Introduction

This SEP aims to introduce a predictable release pattern for SunPy core, so that
the community relying on SunPy can plan their upgrades and changes in a
transparent way. This SEP introduces timed releases and a versioning system.

SunPy is being used more as an upstream dependency for both affiliated packages
and packages in the wider solar or heliophysics ecosystems. It will aid these
packages in planning their development if the SunPy core package has a
predictable release and support cycle.

The desire for stability and predictability is countered by the desire of the
SunPy developers to continue providing new features and functionality and
continue to iterate on the SunPy API to further increase our usability and
correctness.

This SEP therefore tries to focus on when the SunPy core package will be
released rather than placing any strict limitations on changes and API
stability.

# Detailed Description

## Release Schedule

This SEP proposes that the SunPy core package will be released twice a year,
initially a release in the months of May and November have been chosen to place
the SunPy release shortly after that of the Astropy core package. The specific
times of the release are at the discretion of the lead developer, and changes to
the months of the releases can be made without modifying this SEP to follow any
pertinent release cycles of upstream packages.

## Supporting Releases with bug fixes

This SEP proposes that the first annual release of SunPy will be supported for
12 months (until the equivalent release in the next calendar year) and the
second annual release of SunPy will be supported for six months until the first
release the subsequent year.

The objective of this support cycle is to balance the desire to provide a
release cycle for people who wish to experience minimal changes to SunPy with
minimizing the maintenance burden on the SunPy developers. It is feasible that we
could extend the support cycle of the first annual release longer than 12
months, to give users an overlap period where they can upgrade. However, we
currently feel that supporting more than two releases simultaneously is beyond
the resources of the project.

## Release Numbering

In the numbering of SunPy releases we wish to covey two pieces of information:

#. If the release is the first (LTS) release or the second release in a year.
#. If the release contains major breaking changes to the API.

We therefore propose the following versioning system.

X.Y.z

Where the three components have the following meanings:

* X. is the major version number, this is to be increased whenever there are
  major breaking changes to the API.
* Y. is the release counter, this will be incremented with every release if it
  is an odd integer it will be the second release in a year, if it is 0 or an
  even integer this will be the first release in the year.
* z. is the bug fix number, and is to be incremented for any bug fix releases.


This versioning system combined with the bi-annual release schedule is designed
to provide a system where the first release in a year would normally be a
`X.1.0` release, where no major breaking changes were introduced and the second
release in the year would be a `X.0.0` release where breaking changes can be
introduced.

There is however the flexibility in this SEP to provide for the scenario where no
major breaking changes are introduced into the second release in a year and
therefore it would be `X.2.0` which would be followed by a `X.3.0` release in
the first half of the following year. At this stage in the development of the
SunPy core package we anticipate that this is unlikely to happen, as it would
lead to 2 years without major API breakage.


### Definition of "Major API Breakage"

We anticipate that all releases of SunPy may have to make some small changes to
the API, for example to correct inconsistencies or to rectify incorrect
algorithms. We choose to loosely define "major API breakage" as refactoring of
the user facing code which would likely cause many users to have to make
significant changes to their code. Changes made to the core package in the past
which would classify as this would be the introduction of units, or the
transition to Astropy Time etc. The final decision to increment the major
version is at the discretion of the lead developer.

## Deprecations and Documentation

The SunPy core package will always document API changes, in the changelog and in
the user documentation. Where practical a side-by-side comparison of old and new
functionality will be provided.

In addition to this where possible code will emit deprecation warnings to users
to inform them of planned changes to or removal of API. Warnings will **only be
emitted** when an alternative option exists for the functionality, or the
functionality is to be completely removed.

All effort will be made to provide at least one minor `.Y.` release where
functionality which is to be changed or removed emits deprecation warnings.


# Decision Rationale
This is a great idea because...
